# 小马过河 —— 前后端是怎么分家的？

> 作者：雪狼

// no-translate

事实上，我们刚刚走出前后端合一的时代没几年，直到今天仍然有大量系统是前后端合一的。那么，为什么前后端分离成为了一种趋势？前后端分离之后又有什么好处呢？

## 越来越刁的用户口味

我曾经历过电话拨号上网的时代，那时候的网速只有每秒几k字节。凡能上网的，皆有无比的耐心。然而，技术日新月异，终于有一天，人们连几百k的速度都不能忍了，他们期待更快的速度 —— 就像在本地运行的原生程序一样。

这时候，GMail横空出世了。它采用的方案是让代码完全在浏览器中运行，只有需要调用远端API时，才去找服务器。这样一来，用户终于不用任何操作都不得不从服务器绕一圈了，用户体验有了本质性的提升。这种划时代的体验升级，正是让GMail风靡全球的重要因素之一。

后来，有人把这种方式命名为：AJAX（异步JavaScript与XML），于是风靡一时。当然，现在的API大都放弃了XML格式，而是以JSON格式为主了。

## 百花齐放的上网设备

如果说，升级用户体验是前后端分离的第一推动，那么让前后端分离开始流行的另一项重大推力，就是移动时代的到来。来到移动时代之后，人们的上网设备不再局限于PC，手机上网很快赶超了PC，占据了半壁江山。

这种局面就带来了一项重大挑战：就算在你的业务中用户体验并不是最重要的，但你总不能看着移动市场的用户被对手抢走吧？但PC端和移动端，不仅仅是分辨率的差异，在用户的使用习惯、导航设计等方面都有显著的区别。你会如何解决这个问题？把所有网站都写成一个PC端和一个移动端吗？那样做的话，需要架构师有相当的水平，并且维护成本也会相当高。

但前后端分离的架构，却天然可以解决这个问题，因为真正承载着业务逻辑的后端只需要写一份，而前端逻辑可以写两份，并且可以非常轻量级的随着用户需求而变化。

## 日趋成熟的基础设施

在 NodeJS（相当于JS领域的JRE或JDK）推出之前，前端几乎没有什么好用的工具。而NodeJS的推出，为前端带来了两个重大利好。首先是基于 NodeJS 的前端工具出现了井喷，如果没有这次井喷，前端之路会走得更加艰难。其次是基于JS的第三方库也随之爆发起来。NodeJS 原本的定位是服务于后端开发领域，但事实上，除了一些和本地原生API有关的部分之外，NodeJS中一些常用到的JS库，特别是算法库，也同样可以应用于前端领域。除此之外，NodeJS 还带来了一个事实性的模块化标准 CommonJS，它也被后来的 Webpack 等工具当做了前端模块化的标准。

## 万事俱备，只欠东风

在 jQuery 时代，前端代码很难独立出来，因为 jQuery 的编程模型让程序员卷入了太多的细节（虽然已经比原生JS开发少了很多），所以工程化很成问题，特别是在涉及到大规模、长周期、多人协作的领域，缺乏对工程化的支持是一个致命伤。

在2009年，一个原本准备用来建软件原型的框架诞生了，几年后，它意外火了起来，那就是AngularJS。事实上，今天仍然有很多基于 AngularJS 的程序运行在生产环境中，特别是在国外。如果你看到这样的系统，应该向 AngularJS 致敬，因为它是一个 8 岁高龄的框架，这在号称每六个月翻新一次的前端领域是很难想象的。

当然，在现在的技术条件下，AngularJS确实老了，它的历史包袱太重，需要做的兼容性工作太多。于是，2014年，官方开发组在 Google 的支持下开始了一项雄心勃勃的计划：甩掉一切历史包袱，完全重写 Angular 。

在一段时间之后，Angular 所用的语言换成了当时尚在襁褓中的 TypeScript 。Angular 与 TypeScript 的合作可谓是双赢。TypeScript 为 Angular 带来了超强的工程性，这个由 Anders（Delphi和C#的作者）亲自操刀的新语言，兼具动态类型的灵活与静态类型的严谨，注定有一天要走上王座。而在 Angular 的需求驱动下，TypeScript 也快速成熟起来，并且 Angular 也成了 TypeScript 的一个著名案例。如果说当今世界谁在 TypeScript 的工程实践上经验最丰富，那么估计连微软内部能超过 Angular项目组 的也没几个。

但是，Angular开发组里面可能是处女座太多了，处处透露着对完美的追求，以至于一直开发了两年半才终于推出。这期间，Angular 一直在锤炼各种接口的设计，甚至到了 RC 阶段都在大改，让外界不禁嘲笑 Angular 开发组 "重新定义了RC"。当然，RC 阶段的付出终于换来了回报，在正式推出之后，Angular 开发组正式对外宣布了一个版本发布计划，那就是严格遵循语义化版本（semver）规范，这种规范就像是 NodeJS 的升级，除标记为试验性的 API 之外，都会在两个相邻版本之间保持完全的兼容，废弃的 API 会像 Java 一样标记为已废弃，提醒你修改，等到第三个版本才会正式移除。

这种严谨、可预测的版本计划，让开发组可以放心的不断跟随最新版本升级，也就是说，对于 Angular 项目来讲，最佳的策略是跟随官方的每一个 Release 版本，一推出就立即跟进。这样，你的程序仍然可以正常编译，只是编译的时候会给你一些 "废弃" 提示，你可以有非常宽裕的半年时间来把它们改成新的方式。

周虽旧邦，其命维新。这就是新的 Angular ！一个具有很高工程性的现代化框架，并且会一直跟随技术潮流进行演化。
